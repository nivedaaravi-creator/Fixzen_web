<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FixZen - Sign Up</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { keyframes: { fadeInUp: { '0%': {opacity:0, transform:'translateY(10px)'}, '100%': {opacity:1, transform:'translateY(0)'} } }, animation: { fadeInUp: 'fadeInUp .6s ease-out both' } } } }
  </script>
  <style>
    body { 
        background: var(--gradient-hero);
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        margin: 0; 
    }
    .auth-wrap { min-height: 100vh; display: grid; place-items: center; padding: 20px; }
    .auth-container { 
        width: 360px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: var(--shadow-xl);
    }
    h2 { color: var(--brand); margin-bottom: 20px; text-align: center; }
    form { text-align: left; }

    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .card-pop { animation: cardPop .6s cubic-bezier(.22,.92,.29,1.12) both; }
    @keyframes cardPop { 0% { transform: translateY(10px) scale(.98); opacity: 0; } 100% { transform: translateY(0) scale(1); opacity: 1; } }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="container navbar-inner">
      <div class="logo">FixZen</div>
      <div class="nav-links">
        <a href="{{ url_for('home') }}">Home</a>
        <a class="pill" href="{{ url_for('login') }}">Login</a>
      </div>
    </div>
  </div>
  <div class="auth-wrap">
    <div class="auth-container card motion-safe:animate-fadeInUp card-pop" style="backdrop-filter: blur(6px); background: rgba(255,255,255,.9)">
      <h2>Sign Up</h2>
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for message in messages %}
            <div data-flash data-type="success" style="display:none">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      <form method="POST" action="/signup">
        <label for="name">Full Name</label>
        <input id="name" type="text" name="name" required>

        <label for="email">Email</label>
        <input id="email" type="email" name="email" required>

        <label for="password">Password</label>
        <div style="position:relative">
          <input id="password" type="password" name="password" required>
          <button type="button" id="togglePass1" class="btn btn-secondary" style="position:absolute; right:6px; top:6px; padding:6px 10px">Show</button>
        </div>

        <label for="confirm">Confirm Password</label>
        <div style="position:relative">
          <input id="confirm" type="password" name="confirm" required>
          <button type="button" id="togglePass2" class="btn btn-secondary" style="position:absolute; right:6px; top:6px; padding:6px 10px">Show</button>
        </div>

        <div style="display:flex; align-items:center; gap:8px; margin-top:10px;">
          <input type="checkbox" id="agree" required>
          <label for="agree" style="margin:0">I agree to the <a href="#" onclick="openModal('termsModal'); return false;">Terms & Privacy</a></label>
        </div>

        <button type="submit" class="btn btn-primary" style="width:100%">Sign Up</button>
      </form>
      <p>Already have an account? <a href="{{ url_for('login') }}">Login</a></p>
    </div>
  </div>
  <!-- Terms Modal -->
  <div class="modal-backdrop" id="termsModal">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Terms & Privacy</div>
        <button class="btn btn-secondary" onclick="closeModal('termsModal')">Close</button>
      </div>
      <div class="modal-body">
        By creating an account you agree to our terms of service and privacy policy.
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('termsModal')">Close</button>
      </div>
    </div>
  </div>
  <script>
    function toggle(id, btnId){
      const el = document.getElementById(id);
      const btn = document.getElementById(btnId);
      if (!el || !btn) return;
      const is = el.getAttribute('type') === 'password';
      el.setAttribute('type', is ? 'text' : 'password');
      btn.textContent = is ? 'Hide' : 'Show';
    }
    document.getElementById('togglePass1')?.addEventListener('click', ()=> toggle('password','togglePass1'));
    document.getElementById('togglePass2')?.addEventListener('click', ()=> toggle('confirm','togglePass2'));
  </script>
  <script type="module">
    import { openModal, closeModal } from '{{ url_for('static', filename='app.js') }}';
    window.openModal = openModal;
    window.closeModal = closeModal;
  </script>
  <script type="module" src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
